---
import { AvButton, AvCard } from "@ansiversa/components";

const actions = [
  {
    label: "Home",
    description: "Learn what the builder offers and start a resume quickly.",
    href: "/",
  },
  {
    label: "Resume Templates",
    description: "Pick a layout before you start editing.",
    href: "/templates",
  },
  {
    label: "Create Resume",
    description: "Open the guided editor with your chosen template.",
    href: "/app/resume/new",
  },
  {
    label: "My Resumes",
    description: "Review and edit saved resumes in one place.",
    href: "/app/resumes",
  },
  {
    label: "Edit Sample Resume",
    description: "Jump into the sample editor to see the workflow.",
    href: "/app/resume/r1",
  },
  {
    label: "Download Sample PDF",
    description: "Preview the PDF output for a resume.",
    href: "/app/resume/r1/pdf",
  },
];
---

<div
  class="av-action-switcher"
  x-data="{ open: false }"
  x-init="window.addEventListener('keydown', (event) => { if ((event.metaKey || event.ctrlKey) && event.key.toLowerCase() === 'k') { event.preventDefault(); open = !open; } })"
  @keydown.escape.window="open = false"
  @click.outside="open = false"
>
  <button
    class="av-action-switcher__toggle"
    type="button"
    aria-label="Open quick actions"
    :aria-expanded="open"
    aria-haspopup="true"
    @keydown.enter.prevent="open = !open"
    @click="open = !open"
  >
    <span x-show="!open">Open actions</span>
    <span x-show="open">Close actions</span>
  </button>

  <div
    class="av-action-switcher__panel"
    x-show="open"
    x-cloak
    x-transition.origin.bottom.right
    role="menu"
    aria-label="Quick navigation"
  >
    <AvCard className="av-action-switcher__card">
      <div class="av-action-switcher__header">
        <p class="av-action-switcher__title">Quick actions</p>
        <p class="av-action-switcher__subtitle">Move between pages without losing context.</p>
      </div>
      <ul class="av-action-switcher__list">
        {actions.map((action) => (
          <li role="none">
            <div class="av-action-switcher__item">
              <div class="av-action-switcher__item-text">
                <p class="av-action-switcher__item-label">{action.label}</p>
                <p class="av-action-switcher__item-description">{action.description}</p>
              </div>
              <AvButton href={action.href} size="sm" aria-label={`Go to ${action.label}`} role="menuitem">
                Go
              </AvButton>
            </div>
          </li>
        ))}
      </ul>
    </AvCard>
  </div>
</div>

<style>
  .av-action-switcher {
    position: fixed;
    right: 1.5rem;
    bottom: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    z-index: 40;
  }

  .av-action-switcher__toggle {
    background: linear-gradient(135deg, #2563eb, #0ea5e9);
    color: #fff;
    border: none;
    border-radius: 9999px;
    padding: 0.75rem 1.25rem;
    font-weight: 600;
    box-shadow: 0 10px 25px rgba(37, 99, 235, 0.25);
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
  }

  .av-action-switcher__toggle:hover {
    transform: translateY(-1px);
    box-shadow: 0 14px 30px rgba(37, 99, 235, 0.35);
  }

  .av-action-switcher__panel {
    width: min(420px, calc(100vw - 2rem));
    align-self: flex-end;
  }

  .av-action-switcher__card {
    border: 1px solid rgb(226, 232, 240);
    box-shadow: 0 10px 30px rgba(15, 23, 42, 0.14);
  }

  .av-action-switcher__header {
    margin-bottom: 0.75rem;
  }

  .av-action-switcher__title {
    font-weight: 700;
    color: rgb(15, 23, 42);
  }

  .av-action-switcher__subtitle {
    font-size: 0.9375rem;
    color: rgb(100, 116, 139);
  }

  .av-action-switcher__list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .av-action-switcher__item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    padding: 0.75rem;
    border-radius: 0.75rem;
    background-color: rgb(248, 250, 252);
  }

  .av-action-switcher__item-text {
    display: grid;
    gap: 0.25rem;
  }

  .av-action-switcher__item-label {
    font-weight: 600;
    color: rgb(30, 41, 59);
  }

  .av-action-switcher__item-description {
    font-size: 0.9375rem;
    color: rgb(100, 116, 139);
  }

  [x-cloak] {
    display: none !important;
  }
</style>
