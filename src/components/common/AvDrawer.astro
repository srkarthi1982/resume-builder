---
import { AvButton } from "@ansiversa/components";

interface Props {
  title?: string;
  description?: string;
}

const { title, description } = Astro.props as Props;
---

<div class="av-drawer-root">
  <div class="av-drawer-backdrop" aria-hidden="true"></div>
  <aside
    class="av-drawer"
    role="dialog"
    aria-modal="true"
    aria-labelledby={title ? "av-drawer-title" : undefined}
  >
    <header class="av-drawer__header">
      {title && (
        <h2 id="av-drawer-title" class="av-drawer__title">
          {title}
        </h2>
      )}
      {description && <p class="av-drawer__description">{description}</p>}
      <button
        type="button"
        class="av-drawer__close"
        aria-label="Close"
        x-on:click="$dispatch('close-drawer')"
      >
        <span aria-hidden="true">Ã—</span>
      </button>
    </header>

    <div class="av-drawer__body">
      <slot />
    </div>

    <footer class="av-drawer__footer">
      <slot name="footer" />
    </footer>
  </aside>
</div>

<style>
  .av-drawer-root {
    position: fixed;
    inset: 0;
    z-index: 40;
    display: flex;
    justify-content: flex-end;
  }

  .av-drawer-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(15, 23, 42, 0.55);
    backdrop-filter: blur(2px);
  }

  .av-drawer {
    position: relative;
    width: 100%;
    max-width: 420px;
    height: 100%;
    background: var(--av-surface, #020617);
    border-left: 1px solid rgba(148, 163, 184, 0.35);
    box-shadow: -12px 0 40px rgba(15, 23, 42, 0.7);
    display: flex;
    flex-direction: column;
  }

  .av-drawer__header {
    padding: 1.25rem 1.5rem;
    border-bottom: 1px solid rgba(51, 65, 85, 0.8);
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    position: relative;
  }

  .av-drawer__title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--av-fg-strong, #e5e7eb);
  }

  .av-drawer__description {
    font-size: 0.875rem;
    color: var(--av-fg-muted, #9ca3af);
  }

  .av-drawer__close {
    position: absolute;
    right: 1.25rem;
    top: 1.1rem;
    border-radius: 999px;
    width: 1.75rem;
    height: 1.75rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: transparent;
    color: var(--av-fg-muted, #9ca3af);
    cursor: pointer;
  }

  .av-drawer__close:hover {
    background: rgba(15, 23, 42, 0.8);
    color: var(--av-fg-strong, #e5e7eb);
  }

  .av-drawer__body {
    padding: 1.25rem 1.5rem;
    flex: 1;
    overflow-y: auto;
  }

  .av-drawer__footer {
    padding: 0.75rem 1.5rem;
    border-top: 1px solid rgba(51, 65, 85, 0.8);
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
  }

  @media (max-width: 640px) {
    .av-drawer {
      max-width: 100%;
    }
  }
</style>
