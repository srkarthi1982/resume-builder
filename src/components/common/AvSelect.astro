---
interface Props {
  label?: string;
  name?: string;
  required?: boolean;
  disabled?: boolean;
  className?: string;
  selectClass?: string;
  id?: string;
  hint?: string;
}

const props = Astro.props as Props;

const {
  label,
  name,
  required = false,
  disabled = false,
  className = "",
  selectClass = "",
  id = name ?? `select-${Math.random().toString(36).slice(2)}`,
  hint = "",
} = props;

const wrapperClasses: string[] = ["av-form-group", "av-input-wrapper"];
if (className) wrapperClasses.push(className);

const selectClasses: string[] = ["av-input"];
if (selectClass) selectClasses.push(selectClass);
---

<div class={wrapperClasses.join(" ")}>
  {label && (
    <label class="av-input-label" for={id}>
      {label}
      {required && <span class="av-input-required">*</span>}
    </label>
  )}

  <div class="av-input-select-wrapper">
    <select
      id={id}
      name={name}
      class={selectClasses.join(" ")}
      disabled={disabled}
      required={required}
    >
      <slot />
    </select>
  </div>

  {hint && <p class="av-form-hint">{hint}</p>}
</div>
